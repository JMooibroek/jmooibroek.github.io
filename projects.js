const expiration=2592e5,elements=["explorer","player","audio","playBtn","pauseBtn","stopBtn","progressBar","volumeBar","duration","volume","files","objectCount","fileSize","fileSize2","app","appText","appContent","docIcon","npIcon","appTitle"].reduce(((e,n)=>({...e,[n]:document.getElementById(n)})),{}),projects=[{name:"Double Click On Me",file:"start.html",icon:"wp",size:"0.1",date:"02/02/2025",lines:"2"},{name:"This Website",file:"this-website.html",icon:"doc",size:"3.4",date:"03/02/2025",lines:"28"},{name:"Post Larva Menu Soundtrack",file:"post-larva-menu.mp3",icon:"aud",size:"663.5",date:"06/05/2021"},{name:"Steel and Air",file:"steel and air.mp3",icon:"aud",size:"743.6",date:"16/11/2020"},{name:"Stories",file:"stories.mp3",icon:"aud",size:"1066.2",date:"22/04/2024"},{name:"Cyber Rider",file:"cyber rider.mp3",icon:"aud",size:"504.6",date:"19/04/2021"},{name:"My Library",file:"library.html",icon:"wp",size:"1.49",date:"05/02/2025",lines:"32"},{name:"My Homelab",file:"homelab.html",icon:"doc",size:"2.01",date:"06/02/2025",lines:"0"}];function loadProjects(){files.innerHTML="",projects.forEach((e=>{const n=document.createElement("div");n.classList.add("file"),n.ondblclick=()=>openProject(e.name),n.onclick=()=>selectFile(n,e.size),n.innerHTML=`\n            <img src="assets/${e.icon}.webp" alt="File Icon">\n            <div>\n                <div class="title">${e.name}</div>\n                <div class="date">${e.date}</div>\n            </div>\n        `,files.appendChild(n)}))}let selectedFile=null;function setDefault(){objectCount.innerText=`${projects.length} object(s)`,fileSize.innerText=projects.reduce(((e,n)=>e+parseFloat(n.size)),0)+"KB"}function selectFile(e,n){selectedFile&&selectedFile.classList.remove("selected"),selectedFile=e,selectedFile.classList.add("selected"),objectCount.innerText="1 object(s) selected",fileSize.innerText=n+"KB"}function openProject(e){const n=projects.find((n=>n.name===e)),t="aud"===n.icon?"music/"+n.file:"projects/"+n.file;caches.match(t).then((e=>e||fetch(t))).then((e=>{if(!e.ok)throw new Error("Network response was not ok");const i=e.clone();return caches.open("project-cache").then((e=>e.put(t,i))),"aud"===n.icon?e.blob().then((e=>({data:URL.createObjectURL(e)}))):e.text().then((e=>({data:e})))})).then((({data:t})=>{"aud"===n.icon?(audio.src=t,player.style.display="block",handleZIndex(player),audio.addEventListener("canplay",(function(){audio.play(),playerTime()}),{once:!0})):(appText.innerHTML=t,"wp"===n.icon?(npIcon.style.display="block",docIcon.style.display="none",appTitle.innerText=e+" - Notepad"):(docIcon.style.display="block",npIcon.style.display="none",appTitle.innerText=e+" - WordPad"),app.style.display="block",handleZIndex(app))})).catch((e=>{"aud"===n.icon?appText.innerHTML="Error loading music: "+e.message:appText.innerHTML="Error loading project: "+e.message,app.style.display="block",handleZIndex(app)})),fileSize2.innerText=n.size+"KB"}function closeApp(){app.style.display="none"}function closePlayer(){audio.pause(),audio.currentTime=0,player.style.display="none"}function playerTime(){isNaN(audio.duration)?duration.innerText="0:00 / 0:00":duration.innerText=Math.floor(audio.currentTime/60)+":"+("0"+Math.floor(audio.currentTime%60)).slice(-2)+" / "+Math.floor(audio.duration/60)+":"+("0"+Math.floor(audio.duration%60)).slice(-2)}function updateProgressBar(){const e=audio.currentTime/audio.duration*100;progressBar.value=e,playerTime()}function handleZIndex(e){--app.style.zIndex,--player.style.zIndex,--explorer.style.zIndex,e.style.zIndex=3}document.getElementById("files").addEventListener("click",(function(e){this===(e=window.event||e).target&&(null!=selectedFile&&(selectedFile.classList.remove("selected"),selectedFile=null),setDefault())})),playBtn.addEventListener("click",(()=>{audio.currentTime===audio.duration&&(audio.currentTime=0),audio.play()})),pauseBtn.addEventListener("click",(()=>{audio.pause()})),stopBtn.addEventListener("click",(()=>{audio.pause(),audio.currentTime=0})),progressBar.addEventListener("input",(()=>{audio.currentTime=progressBar.value/100*audio.duration})),volumeBar.addEventListener("input",(()=>{audio.volume=volumeBar.value/100,volume.innerText=(100*audio.volume).toFixed(0)+"%"})),app.addEventListener("click",(()=>handleZIndex(app))),player.addEventListener("click",(()=>handleZIndex(player))),explorer.addEventListener("click",(()=>handleZIndex(explorer))),audio.addEventListener("timeupdate",updateProgressBar),volume.innerText=(100*audio.volume).toFixed(0)+"%",setDefault(),loadProjects();